<!DOCTYPE html>
<html>
<head>
  <title>HAARKS â€” NIFTY Trading Helper</title>
</head>

<body style="
  font-family: Arial, sans-serif;
  background:#0f172a;
  color:white;
  padding:24px;
">

<h2>HAARKS â€” NIFTY Trading Helper</h2>

<div id="status" style="margin-top:8px; font-size:18px;"></div>

<div id="analysis" style="
  margin-top:20px;
  padding:18px;
  border-radius:14px;
  background:#020617;
  max-width:420px;
  line-height:1.5;
">
</div>

<script>
/* =========================================================
   STEP 1 â€” MARKET TIME CHECK
========================================================= */

function isMarketOpen() {
  const now = new Date();
  const day = now.getDay(); // 0 = Sunday
  const hours = now.getHours();
  const minutes = now.getMinutes();

  // Market closed on Saturday & Sunday
  if (day === 0 || day === 6) return false;

  // Market time: 9:15 AM to 3:30 PM
  const time = hours * 60 + minutes;
  return time >= 555 && time <= 930;
}

const marketOpen = isMarketOpen();

/* =========================================================
   STEP 2 â€” DAILY LEVELS (PLACEHOLDER FOR NOW)
   These will later come from real market data
========================================================= */

const previousHigh = "Previous Day High";
const previousLow = "Previous Day Low";

/* =========================================================
   STEP 3 â€” TRADING LOGIC (RULE BASED)
========================================================= */

let marketBias = "";
let callPlan = "";
let putPlan = "";

if (marketOpen) {

  marketBias = "LIVE MARKET â€” WAIT FOR CONFIRMATION";

  callPlan = `
ðŸ“ˆ <b>CALL (CE)</b><br>
Entry: Price breaks & holds above <b>${previousHigh}</b><br>
Stop Loss: Below breakout rejection candle<br>
Target: Minimum <b>1:2 Riskâ€“Reward</b><br>
Condition: Avoid chasing first spike
`;

  putPlan = `
ðŸ“‰ <b>PUT (PE)</b><br>
Entry: Price breaks & holds below <b>${previousLow}</b><br>
Stop Loss: Above breakdown rejection candle<br>
Target: Minimum <b>1:2 Riskâ€“Reward</b><br>
Condition: Trade only with momentum
`;

} else {

  marketBias = "MARKET CLOSED â€” PLAN FOR NEXT DAY";

  callPlan = `
ðŸ“ˆ <b>CALL (CE)</b><br>
Entry: Only above <b>${previousHigh}</b><br>
Stop Loss: Below fake breakout / rejection<br>
Target: Minimum <b>1:2 Riskâ€“Reward</b><br>
Note: Trade only after confirmation
`;

  putPlan = `
ðŸ“‰ <b>PUT (PE)</b><br>
Entry: Only below <b>${previousLow}</b><br>
Stop Loss: Above fake breakdown / rejection<br>
Target: Minimum <b>1:2 Riskâ€“Reward</b><br>
Note: Avoid trades inside range
`;
}

/* =========================================================
   STEP 4 â€” DISPLAY OUTPUT
========================================================= */

document.getElementById("status").innerHTML =
  marketOpen ? "ðŸŸ¢ Market is OPEN" : "ðŸ”´ Market is CLOSED";

document.getElementById("analysis").innerHTML = `
<b>Market Bias:</b> ${marketBias}<br><br>

<div style="margin-bottom:16px;">
${callPlan}
</div>

<div>
${putPlan}
</div>
`;
</script>

</body>
</html>
