<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HAARKS â€” NIFTY Trading Helper</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #020617;
  color: #fff;
  padding: 20px;
}

h1 { font-size: 26px; margin: 0; }
.brand { font-weight: bold; letter-spacing: 1px; }

.status { margin-top: 6px; color: #ff4d4d; font-weight: bold; }

.panel {
  margin-top: 20px;
  background: #0b1220;
  padding: 18px;
  border-radius: 14px;
  max-width: 560px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
}

label { font-size: 13px; color: #9ca3af; }

input {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
  margin-bottom: 10px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
}

button {
  padding: 10px;
  width: 100%;
  border: none;
  border-radius: 8px;
  font-size: 15px;
  font-weight: bold;
  background: #2563eb;
  color: #fff;
  cursor: pointer;
}

.section { margin-top: 16px; }
.call { color: #22c55e; }
.put { color: #ef4444; }
.small { font-size: 12px; color: #9ca3af; }

iframe {
  margin-top: 25px;
  width: 100%;
  height: 520px;
  border: none;
  border-radius: 14px;
}
</style>
</head>

<body>

<h1 class="brand">HAARKS â€” NIFTY Trading Helper</h1>
<div class="status">ðŸ”´ Market is CLOSED â€” Planning Mode</div>

<div class="panel">

<label>Previous High</label>
<input id="high" type="number" placeholder="e.g. 22640">

<label>Previous Low</label>
<input id="low" type="number" placeholder="e.g. 22410">

<button onclick="generate()">Generate Trade Plan</button>

<div id="plan"></div>

<hr style="margin:18px 0; border-color:#1f2937">

<label>Manual NIFTY Price (for alerts)</label>
<input id="livePrice" type="number" placeholder="Enter current NIFTY price">

<label>Set Alert Price</label>
<input id="alertPrice" type="number" placeholder="Alert trigger level">

<button onclick="setAlert()">Set Alert</button>

<div id="alertStatus" class="small"></div>

</div>

<iframe
  src="https://s.tradingview.com/widgetembed/?symbol=NSE:NIFTY&interval=5&theme=dark&style=1&toolbarbg=%230b1220&enable_publishing=false"
></iframe>

<div class="small">
Charts via TradingView (exchange-delayed). No broker execution.
</div>

<script>
let alertTriggered = false;

function round50(x) {
  return Math.round(x / 50) * 50;
}

function generate() {
  const high = +highEl.value;
  const low = +lowEl.value;

  if (!high || !low || high <= low) {
    alert("Enter valid high & low");
    return;
  }

  const range = high - low;
  const atm = round50((high + low) / 2);

  const ceStrike = atm + 50;
  const peStrike = atm - 50;

  plan.innerHTML = `
    <div class="section call">
      ðŸ“ˆ CALL (CE)<br>
      Entry: Above <b>${high}</b><br>
      SL: Below <b>${low}</b><br>
      Target: <b>${high + range}</b><br>
      Suggested Strike: <b>${ceStrike} CE</b>
    </div>

    <div class="section put">
      ðŸ“‰ PUT (PE)<br>
      Entry: Below <b>${low}</b><br>
      SL: Above <b>${high}</b><br>
      Target: <b>${low - range}</b><br>
      Suggested Strike: <b>${peStrike} PE</b>
    </div>

    <div class="section small">
      No-Trade Zone: ${low} â€“ ${high}<br>
      Strategy: Breakout + 1:2 RR
    </div>
  `;
}

function setAlert() {
  const price = +alertPrice.value;
  if (!price) return;

  localStorage.setItem("haarksAlert", price);
  alertTriggered = false;
  alertStatus.innerText = "Alert set at " + price;
}

setInterval(() => {
  const current = +livePrice.value;
  const alertAt = +localStorage.getItem("haarksAlert");

  if (!alertTriggered && current && alertAt && current >= alertAt) {
    alertTriggered = true;
    alert("HAARKS ALERT ðŸ”” Price reached " + alertAt);
  }
}, 3000);
</script>

</body>
</html>
