<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>HAARKS â€” Smart Trade</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at top, #0b1a2d, #050b16);
    color: #fff;
  }

  .container {
    max-width: 720px;
    margin: 40px auto;
    padding: 20px;
  }

  h1 {
    margin-bottom: 6px;
    font-size: 22px;
    letter-spacing: 0.5px;
  }

  .status {
    font-size: 14px;
    margin-bottom: 20px;
  }

  .closed { color: #ff4d4d; }
  .open { color: #00ff9c; }

  .card {
    background: linear-gradient(180deg, #0f203a, #0a162a);
    border-radius: 14px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  }

  .row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 14px;
    font-size: 16px;
  }

  .label {
    color: #9db2d1;
  }

  .value {
    font-weight: bold;
  }

  .diff {
    font-size: 20px;
    margin-top: 12px;
  }

  .bullish { color: #00ff9c; }
  .bearish { color: #ff5c5c; }
  .neutral { color: #ffd166; }

  .footer {
    margin-top: 18px;
    font-size: 12px;
    color: #7c8fb3;
  }
</style>
</head>

<body>
<div class="container">
  <h1>HAARKS â€” Smart Trade</h1>
  <div id="marketStatus" class="status"></div>

  <div class="card">
    <div class="row">
      <div class="label">NIFTY 50 (Previous Close)</div>
      <div class="value" id="nifty">25,232.50</div>
    </div>

    <div class="row">
      <div class="label">GIFT NIFTY</div>
      <div class="value" id="gift">25,290.00</div>
    </div>

    <div class="row diff">
      <div class="label">Difference</div>
      <div class="value" id="diff"></div>
    </div>

    <div class="row diff">
      <div class="label">Market Bias</div>
      <div class="value" id="bias"></div>
    </div>
  </div>

  <div class="footer">
    Data logic only â€¢ No broker connection â€¢ API-safe demo (In progress)<br>
    Â© HAARKS
  </div>

  <!-- LIVE GIFT NIFTY -->
  <div style="margin-top:30px;">
    <iframe
      src="https://s.tradingview.com/widgetembed/?symbol=NSE:GIFTNIFTY&interval=1&theme=dark&style=1&timezone=Asia/Kolkata"
      style="width:100%; height:420px; border-radius:14px; border:none;"
      loading="lazy">
    </iframe>
  </div>
</div>

<script>
/* ===== MARKET STATUS (IST ONLY) ===== */
function isMarketOpenIST() {
  const now = new Date();
  const ist = new Date(
    now.toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
  );
  const day = ist.getDay();
  const hour = ist.getHours();
  const min = ist.getMinutes();

  if (day === 0 || day === 6) return false;
  if (hour < 9 || (hour === 9 && min < 15)) return false;
  if (hour > 15 || (hour === 15 && min > 30)) return false;
  return true;
}

const statusEl = document.getElementById("marketStatus");
if (isMarketOpenIST()) {
  statusEl.textContent = "ðŸŸ¢ Market is OPEN";
  statusEl.classList.add("open");
} else {
  statusEl.textContent = "ðŸ”´ Market is CLOSED";
  statusEl.classList.add("closed");
}

/* ===== CORE LOGIC ===== */
const nifty = 25232.5;
const gift = 25290.0;

const diff = gift - nifty;
document.getElementById("diff").innerText =
  (diff > 0 ? "+" : "") + diff.toFixed(2);

const biasEl = document.getElementById("bias");

if (diff > 20) {
  biasEl.innerText = "Bullish â†’ CALL bias";
  biasEl.className = "value bullish";
} else if (diff < -20) {
  biasEl.innerText = "Bearish â†’ PUT bias";
  biasEl.className = "value bearish";
} else {
  biasEl.innerText = "Neutral â†’ No trade zone";
  biasEl.className = "value neutral";
}
</script>
</body>
</html>
